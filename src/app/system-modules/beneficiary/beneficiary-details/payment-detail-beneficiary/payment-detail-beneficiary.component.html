<div>
    <div class="content-top-bar">
        <div class="bar-labels">
            <div>
                <label>Registered by:</label>
                <span>{{ policy?.platformOwnerId?.shortName }}</span>
            </div>
        </div>
        <div class="bar-icons">
            <div>Household ID:
                <span>{{ policy?.policyId }}</span>
            </div>
        </div>
        <div class="bar-icos">
            <div>Status:
                <span *ngIf="policy?.isActive" style="color: green;">Active</span>
                <span *ngIf="!policy?.isActive" style="color: red;">Inactive</span>
            </div>
        </div>
        <div class="bar-icons">
            <div>Program:
                <span>{{ policy?.planId?.name }}</span>
            </div>
        </div>
        <!-- <div class="bar-labels" style="font-size: 10px">
            <div>
                <label>Formal sector plan</label>
            </div>
        </div> -->
    </div>
    <div class="check-payment-status">
        <div class="check-payment-left">
            <div *ngIf="policy?.isPaid">
                Premium Category: {{ policy?.premiumCategoryId?.name }}
                <br> Payment Status:<span class="green"> Paid</span>, Due Date: <span class="green">{{ policy?.dueDate }}</span>
            </div>
            <div *ngIf="!policy?.isPaid">
                Payment status:<span class="red"> Not Paid</span>
            </div>
        </div>
        <div class="check-payment-right">
            <button (click)="onClickShowPayment();" class="btn btn-medium btn-blue cta show-payment">Pay Premium</button>
        </div>
    </div>
    <div class="align-chac" *ngIf="showPayment">
        <div *ngIf="!isForRenewal">
            <div class="chac-box">
                <div class="frm-inner-title">Health Insurance Agent</div>
                <div class="frm-item-wrap">
                    <label class="label">HIA</label>
                    <div class="inputWrap">
                        {{ policy?.hiaId?.name }}
                    </div>
                </div>

                <div class="frm-inner-title">Primary Health Care Provider</div>
                <div class="frm-item-wrap">
                    <label class="label">Provider Name</label>
                    <div class="inputWrap">
                        {{ policy?.providerId?.name }}
                    </div>
                </div>

                <!-- <div class="frm-inner-title">Plan Type</div> -->
                <div class="frm-item-wrap">
                    <label class="label">Plan Type</label>
                    <div class="inputWrap">
                        {{ policy?.planTypeId?.name }}
                    </div>
                </div>

                <div class="frm-item-wrap">
                    <label class="label">Plan Name:</label>
                    <div class="inputWrap">
                        {{ policy?.planId?.name }}
                    </div>
                </div>

                <div class="frm-item-wrap">
                    <label class="label">Premium Category:</label>
                    <div class="inputWrap">
                        {{ policy?.premiumCategoryId?.name }}
                    </div>
                </div>

                <div class="frm-item-wrap">
                    <label class="label">Premium Package:</label>
                    <div class="inputWrap">
                        {{ policy?.premiumPackageId?.category?.name }} ({{ policy?.premiumPackageId?.duration }} {{ policy?.premiumPackageId?.unit?.name }} {{ policy?.premiumPackageId?.amount }})
                    </div>
                </div>

                <div class="frm-item-wrap">
                    <label class="label">Sponsorship:</label>
                    <div class="inputWrap">
                        {{ policy?.sponsorshipId?.name }}
                    </div>
                </div>
                <div class="frm-item-wrap">
                    <label class="label">Payment Period:</label>
                    <div class="inputWrap">
                        {{ policy?.premiumPackageId?.duration }} {{ policy?.premiumPackageId?.unit?.name }}(s)
                    </div>
                </div>
                <div class="frm-item-wrap">
                    <label class="label">Amount to be paid:</label>
                    <div class="inputWrap">
                        &#x20A6;{{ policy?.premiumPackageId?.amount }}
                    </div>
                </div>
            </div>
            <div class="pay-btn-detail-wrap">
                <div class="payment-option">
                    <form [formGroup]="paymentOptionGroup">
                        <select formControlName="paymentOption">
                            <option value="e-Payment" selected>e-Payment</option>
                            <option value="Cash">Cash</option>
                            <option value="Cheque">Cheque</option>
                        </select>
                    </form>
                </div>
                <angular4-paystack *ngIf="withPaystack" [key]="paystackClientKey" [email]="policy?.principalBeneficiary?.personId?.email" [amount]="policy?.premiumPackageId?.amountInKobo" [ref]="refKey" [class]="'btn btn-primary btn-medium btn-blue'" (close)="paymentCancel()"
                    (callback)="paymentDone($event)">e-Payment</angular4-paystack>
                <!-- <button style="margin-right:10px; width:150px; height:30px" (click)="onClickPayWithPaystack();" class="btn-ePay"></button> -->
                <button *ngIf="chequePayment || cashPayment" class="btn btn-medium btn-blue cta" style="width:150px;padding:10px;margin-left:10px;"> PAY </button>
            </div>
        </div>
        <div *ngIf="isForRenewal" style="text-align:center;width:100%">
            <button (click)="onClickRenewPremium();" class="btn btn-medium btn-blue cta show-payment">Renew Premium</button>
        </div>
    </div>
    <div style="padding: 10px 10px 30px 10px;">
        <div class="text-center" style="font-weight: bold">
            <span>Payment History</span>
        </div>
        <table class="table" cellpadding="0" cellspacing="0" border="0.5">
            <thead class="thead">
                <tr class="tr">
                    <th class="th">No</th>
                    <th class="th">Due Date</th>
                    <th class="th">LASHMA ID</th>
                    <th class="th">Amount Paid</th>
                    <th class="th">Duration Policy</th>
                    <th class="th">Policy ID</th>
                    <th class="th">Health Plan</th>
                    <th class="th">Responsible HIA</th>
                </tr>
            </thead>

            <tbody class="tbody">
                <tr class="tr" *ngIf="previousPolicies.length === 0 && !previousPolicyLoading">
                    <td class="text-center" colspan="8">No data available in table</td>
                </tr>
                <tr class="tr" *ngIf="previousPolicies.length === 0 && previousPolicyLoading">
                    <td class="text-center" colspan="8">
                        <i class="fa fa-spinner fa-spin"></i>
                    </td>
                </tr>
                <tr *ngFor="let policy of previousPolicies; let i = index;" class="tr">
                    <td class="td">{{i+1}}</td>
                    <td class="td">{{ policy?.dueDate }}</td>
                    <td class="td">{{ policy?.principalBeneficiary?.platformOwnerNumber }}</td>
                    <td class="td" style="color: green;">&#x20A6; {{ policy?.premiumPackageId?.amount }}</td>
                    <td class="td">{{ policy?.premiumPackageId?.duration }} {{ policy?.premiumPackageId?.unit?.name }}</td>
                    <td class="td">{{ policy?.policyId }}</td>
                    <td class="td">{{ policy?.planId?.name }}</td>
                    <td class="td">{{ policy?.hiaId?.name }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="list-buttom" *ngIf="previousPolicies.length > 0">
        <div class="list-summary">Showing 1 to {{ previousPolicies.length }} of {{ previousPolicies.length }} entries (filtered from {{ previousPolicies.length }} total entries)</div>
        <div class="btn btn-medium btn-yellow">Load More</div>
    </div>

    <!-- (click)=" addPaymentMode_click()" -->
</div>